(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{nWY6:function(e,n,t){"use strict";t.r(n),t.d(n,"SettingModule",(function(){return w}));var o=t("ofXK"),i=t("tyNb"),r=t("mrSG"),s=t("3Pt+");class l extends class{}{}var a=t("fXoL"),b=t("jMEw"),c=t("VILh"),d=t("LWQN"),p=t("ocnv"),u=t("B+r4"),m=t("D9mS"),h=t("PTRe"),g=t("EGpF"),f=t("zAKX"),z=t("OzZK"),T=t("RwU8"),U=t("C2AL"),y=t("FwiY");function v(e,n){1&e&&(a.Ub(0,"div"),a.Pb(1,"i",31),a.Ub(2,"div",32),a.Jc(3,"\u4e0a\u4f20\u56fe\u7247"),a.Tb(),a.Tb())}function M(e,n){if(1&e&&a.Pb(0,"img",33),2&e){const e=a.fc(2);a.nc("src",e.the_submit.schoolBadge="schoolBadge.png",a.zc)}}function C(e,n){if(1&e&&a.Pb(0,"nz-option",34),2&e){const e=n.$implicit;a.nc("nzValue",e.value)("nzLabel",e.name)}}function _(e,n){if(1&e&&a.Pb(0,"nz-option",34),2&e){const e=n.$implicit;a.nc("nzValue",e.value)("nzLabel",e.name)}}function O(e,n){if(1&e&&a.Pb(0,"nz-option",34),2&e){const e=n.$implicit;a.nc("nzValue",e.value)("nzLabel",e.name)}}function R(e,n){if(1&e&&a.Pb(0,"nz-option",34),2&e){const e=n.$implicit;a.nc("nzValue",e.value)("nzLabel",e.name)}}const S=function(){return{standalone:!0}};function A(e,n){if(1&e){const e=a.Vb();a.Ub(0,"form",1),a.Ub(1,"div",2),a.Ub(2,"a",3),a.Jc(3,"\u57fa\u7840\u4fe1\u606f"),a.Tb(),a.Tb(),a.Ub(4,"div",4),a.Ub(5,"div",5),a.Ub(6,"div",6),a.Ub(7,"nz-form-item"),a.Ub(8,"nz-form-label",7),a.Jc(9,"LOGO "),a.Tb(),a.Ub(10,"nz-form-control"),a.Ub(11,"nz-upload",8),a.Hc(12,v,4,0,"div",9),a.Hc(13,M,1,1,"img",10),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(14,"div",6),a.Ub(15,"nz-form-item"),a.Ub(16,"nz-form-label",7),a.Ub(17,"span",11),a.Jc(18,"*"),a.Tb(),a.Jc(19,"\u5b66\u6821\u540d\u79f0 "),a.Tb(),a.Ub(20,"nz-form-control",12),a.Ub(21,"input",13),a.bc("ngModelChange",(function(n){return a.xc(e),a.fc().the_submit.name=n})),a.Tb(),a.Tb(),a.Tb(),a.Ub(22,"nz-form-item"),a.Ub(23,"nz-form-label",7),a.Ub(24,"span",11),a.Jc(25,"*"),a.Tb(),a.Jc(26,"\u5b66\u6821\u5730\u5740 "),a.Tb(),a.Ub(27,"nz-form-control",14),a.Ub(28,"input",15),a.bc("ngModelChange",(function(n){return a.xc(e),a.fc().the_submit.address=n})),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(29,"div",16),a.Ub(30,"a",3),a.Jc(31,"\u6d88\u606f\u901a\u77e5\u914d\u7f6e"),a.Tb(),a.Tb(),a.Ub(32,"div",4),a.Ub(33,"div",5),a.Ub(34,"div",17),a.Ub(35,"nz-form-item"),a.Ub(36,"nz-form-label",7),a.Ub(37,"span",11),a.Jc(38,"*"),a.Tb(),a.Jc(39,"\u662f\u5426\u5141\u8bb8\u5b66\u751f\u53d1\u9001\u6d88\u606f "),a.Tb(),a.Ub(40,"nz-form-control"),a.Ub(41,"nz-switch",18),a.bc("ngModelChange",(function(n){return a.xc(e),a.fc().the_submit.isAllowStudentSendMessage=n})),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(42,"div",17),a.Ub(43,"nz-form-item"),a.Ub(44,"nz-form-label",7),a.Ub(45,"span",11),a.Jc(46,"*"),a.Tb(),a.Jc(47,"\u662f\u5426\u5f00\u653e\u5fb7\u80b2\u8003\u8bc4\u516c\u793a "),a.Tb(),a.Ub(48,"nz-form-control"),a.Ub(49,"nz-switch",19),a.bc("ngModelChange",(function(n){return a.xc(e),a.fc().the_submit.isOpenMoralPublicity=n})),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(50,"div",17),a.Ub(51,"nz-form-item"),a.Ub(52,"nz-form-label",7),a.Jc(53,"\u6821\u5386\u53ef\u8bc4\u8bba\u7684\u7528\u6237\u89d2\u8272 "),a.Tb(),a.Ub(54,"nz-form-control",20),a.Ub(55,"nz-select",21),a.bc("ngModelChange",(function(n){return a.xc(e),a.fc().the_submit.schoolCalendarReplyUserType=n})),a.Hc(56,C,1,2,"nz-option",22),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(57,"div",17),a.Ub(58,"nz-form-item"),a.Ub(59,"nz-form-label",7),a.Jc(60,"\u7efc\u5408\u7d20\u8d28\u53ef\u8bc4\u8bba\u7684\u7528\u6237\u89d2\u8272 "),a.Tb(),a.Ub(61,"nz-form-control",23),a.Ub(62,"nz-select",24),a.bc("ngModelChange",(function(n){return a.xc(e),a.fc().the_submit.integratedReplyUserType=n})),a.Hc(63,_,1,2,"nz-option",22),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(64,"div",16),a.Ub(65,"a",3),a.Jc(66,"\u5b66\u4e60\u7a7a\u95f4\u3001\u8bfe\u7a0b\u8ba1\u5212\u3001\u8d44\u6e90\u5e93\u914d\u7f6e"),a.Tb(),a.Tb(),a.Ub(67,"div",4),a.Ub(68,"div",5),a.Ub(69,"div",17),a.Ub(70,"nz-form-item"),a.Ub(71,"nz-form-label",7),a.Ub(72,"span",11),a.Jc(73,"*"),a.Tb(),a.Jc(74,"\u662f\u5426\u5f00\u542f\u8d44\u6e90\u5e93\u8bc4\u8bba "),a.Tb(),a.Ub(75,"nz-form-control"),a.Ub(76,"nz-switch",19),a.bc("ngModelChange",(function(n){return a.xc(e),a.fc().the_submit.isOpenResourceLibraryReply=n})),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(77,"div",17),a.Ub(78,"nz-form-item"),a.Ub(79,"nz-form-label",7),a.Ub(80,"span",11),a.Jc(81,"*"),a.Tb(),a.Jc(82,"\u662f\u5426\u5f00\u542f\u5b66\u4e60\u7a7a\u95f4\u8bc4\u8bba "),a.Tb(),a.Ub(83,"nz-form-control"),a.Ub(84,"nz-switch",19),a.bc("ngModelChange",(function(n){return a.xc(e),a.fc().the_submit.isOpenLearningSpaceReply=n}))("ngModelChange",(function(){return a.xc(e),a.fc().openLearningSpaceReply()})),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(85,"div",17),a.Ub(86,"nz-form-item"),a.Ub(87,"nz-form-label",7),a.Ub(88,"span",11),a.Jc(89,"*"),a.Tb(),a.Jc(90,"\u5b66\u4e60\u7a7a\u95f4\u53ef\u8bc4\u8bba\u7684\u7528\u6237\u89d2\u8272 "),a.Tb(),a.Ub(91,"nz-form-control",25),a.Ub(92,"nz-select",26),a.bc("ngModelChange",(function(n){return a.xc(e),a.fc().the_submit.learningSpaceReplyUserType=n})),a.Hc(93,O,1,2,"nz-option",22),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(94,"div",17),a.Ub(95,"nz-form-item"),a.Ub(96,"nz-form-label",7),a.Ub(97,"span",11),a.Jc(98,"*"),a.Tb(),a.Jc(99,"\u662f\u5426\u5f00\u542f\u8bfe\u7a0b\u8ba1\u5212\u8bc4\u8bba "),a.Tb(),a.Ub(100,"nz-form-control"),a.Ub(101,"nz-switch",19),a.bc("ngModelChange",(function(n){return a.xc(e),a.fc().the_submit.isOpenCoursePlanReply=n}))("ngModelChange",(function(){return a.xc(e),a.fc().openCoursePlanReply()})),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(102,"div",17),a.Ub(103,"nz-form-item"),a.Ub(104,"nz-form-label",7),a.Ub(105,"span",11),a.Jc(106,"*"),a.Tb(),a.Jc(107,"\u8bfe\u7a0b\u8ba1\u5212\u53ef\u8bc4\u8bba\u7684\u7528\u6237\u89d2\u8272 "),a.Tb(),a.Ub(108,"nz-form-control",27),a.Ub(109,"nz-select",28),a.bc("ngModelChange",(function(n){return a.xc(e),a.fc().the_submit.coursePlanReplUserType=n})),a.Hc(110,R,1,2,"nz-option",22),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(111,"div",29),a.Ub(112,"button",30),a.bc("click",(function(){return a.xc(e),a.fc().handleOk()})),a.Jc(113,"\u786e\u8ba4"),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.fc();a.nc("formGroup",e.validateForm)("nzLayout","vertical"),a.Ab(6),a.nc("nzSpan",2),a.Ab(5),a.nc("nzMultiple",!1)("nzBeforeUpload",e.nzBeforeUpload),a.Ab(1),a.nc("ngIf",!e.the_submit.schoolBadge),a.Ab(1),a.nc("ngIf",e.the_submit.schoolBadge),a.Ab(1),a.nc("nzSpan",6),a.Ab(7),a.nc("ngModel",e.the_submit.name),a.Ab(7),a.nc("ngModel",e.the_submit.address),a.Ab(6),a.nc("nzSpan",4),a.Ab(7),a.nc("ngModel",e.the_submit.isAllowStudentSendMessage)("ngModelOptions",a.qc(44,S)),a.Ab(1),a.nc("nzSpan",4),a.Ab(7),a.nc("ngModel",e.the_submit.isOpenMoralPublicity)("ngModelOptions",a.qc(45,S)),a.Ab(1),a.nc("nzSpan",4),a.Ab(5),a.nc("ngModel",e.the_submit.schoolCalendarReplyUserType)("nzMode","multiple"),a.Ab(1),a.nc("ngForOf",e.the_usertype),a.Ab(1),a.nc("nzSpan",4),a.Ab(5),a.nc("ngModel",e.the_submit.integratedReplyUserType)("nzMode","multiple"),a.Ab(1),a.nc("ngForOf",e.the_usertype),a.Ab(6),a.nc("nzSpan",4),a.Ab(7),a.nc("ngModel",e.the_submit.isOpenResourceLibraryReply)("ngModelOptions",a.qc(46,S)),a.Ab(1),a.nc("nzSpan",4),a.Ab(7),a.nc("ngModel",e.the_submit.isOpenLearningSpaceReply)("ngModelOptions",a.qc(47,S)),a.Ab(1),a.nc("nzSpan",4),a.Ab(7),a.nc("ngModel",e.the_submit.learningSpaceReplyUserType)("nzDisabled",!e.the_submit.isOpenLearningSpaceReply)("nzMode","multiple"),a.Ab(1),a.nc("ngForOf",e.the_usertype),a.Ab(1),a.nc("nzSpan",4),a.Ab(7),a.nc("ngModel",e.the_submit.isOpenCoursePlanReply)("ngModelOptions",a.qc(48,S)),a.Ab(1),a.nc("nzSpan",4),a.Ab(7),a.nc("ngModel",e.the_submit.coursePlanReplUserType)("nzDisabled",!e.the_submit.isOpenCoursePlanReply)("nzMode","multiple"),a.Ab(1),a.nc("ngForOf",e.the_usertype),a.Ab(2),a.nc("nzLoading",e.isConfirmLoading)}}const L=[{path:"",component:(()=>{class e{constructor(e,n,t,o){this.fb=e,this.ymsrv=n,this.auth=t,this.comm=o,this.isConfirmLoading=!1,this.the_submit=new l,this.the_usertype=[{id:"4",value:4,name:"\u6559\u5e08",selected:!1,edit:!1},{id:"7",value:7,name:"\u5bfc\u5e08",selected:!1,edit:!1},{id:"5",value:5,name:"\u5b66\u751f",selected:!1,edit:!1}],this.nzBeforeUpload=e=>{let n=e.name.substring(e.name.lastIndexOf("."));if(0==[".jpg",".jpeg",".png"].filter(e=>e==n).length)return this.comm.presentMessageError("\u8bf7\u4e0a\u4f20jpg\u3001jpeg\u3001png\u56fe\u7247\uff01"),!1;let t=new FileReader;return t.readAsDataURL(e),t.onload=()=>{this.upload(t.result.toString(),n,e.uid)},!1}}ngOnInit(){this.init()}init(){return Object(r.a)(this,void 0,void 0,(function*(){this.validateForm=this.fb.group({name:[null,[s.p.required]],address:[null,[s.p.required]],schoolCalendarReplyUserType:[null],learningSpaceReplyUserType:[null],coursePlanReplUserType:[null],integratedReplyUserType:[null]}),this.user=yield this.auth.get_user(),yield this.initSchool(),this.the_school&&(yield this.initSetting(),yield this.initData())}))}initSchool(){return Object(r.a)(this,void 0,void 0,(function*(){let e=yield this.ymsrv.get_school_v2(this.user.serialNo);0==e.code?this.the_school=e.data:this.comm.presentMessageError(e.msg)}))}initSetting(){return Object(r.a)(this,void 0,void 0,(function*(){let e=yield this.ymsrv.get_school_setting(this.user.serialNo);0==e.code?this.the_setting=e.data:this.comm.presentMessageError(e.msg)}))}initData(){return Object(r.a)(this,void 0,void 0,(function*(){this.the_submit=Object.assign(Object.assign({},this.the_setting),{name:this.the_school.name,serialNo:this.user.serialNo,schoolBadge:this.the_school.schoolBadge,address:this.the_school.address})}))}upload(e,n,t){return Object(r.a)(this,void 0,void 0,(function*(){yield this.comm.loadingPresent("\u6b63\u5728\u4e0a\u4f20LOGO\uff01");let t=yield this.ymsrv.upload_file(n,e);yield this.comm.loadingDismiss(),0!=t.code?this.comm.presentMessageError(t.msg):this.the_submit.schoolBadge=t.data.url}))}openLearningSpaceReply(){return Object(r.a)(this,void 0,void 0,(function*(){!0===this.the_submit.isOpenLearningSpaceReply?this.validateForm.get("learningSpaceReplyUserType").setValidators(s.p.required):this.validateForm.get("learningSpaceReplyUserType").setValidators(null)}))}openCoursePlanReply(){return Object(r.a)(this,void 0,void 0,(function*(){!0===this.the_submit.isOpenCoursePlanReply?this.validateForm.get("coursePlanReplUserType").setValidators(s.p.required):this.validateForm.get("coursePlanReplUserType").setValidators(null)}))}handleOk(){return Object(r.a)(this,void 0,void 0,(function*(){this.isConfirmLoading=!0;for(const n in this.validateForm.controls)this.validateForm.controls[n].markAsDirty(),this.validateForm.controls[n].updateValueAndValidity();if(!1===this.validateForm.valid)return void(this.isConfirmLoading=!1);let e=yield this.ymsrv.save_setting(this.the_submit);if(0!=e.code)return this.comm.presentMessageError(e.msg),void(this.isConfirmLoading=!1);this.comm.presentMessageSuccess("\u8bbe\u7f6e\u6210\u529f\uff01"),this.isConfirmLoading=!1}))}}return e.\u0275fac=function(n){return new(n||e)(a.Ob(s.e),a.Ob(b.a),a.Ob(c.a),a.Ob(d.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-setting"]],decls:1,vars:1,consts:[["nz-form","","class","padding-left-right-20",3,"formGroup","nzLayout",4,"ngIf"],["nz-form","",1,"padding-left-right-20",3,"formGroup","nzLayout"],[1,"padding-bottom-10"],[1,"b","color-1d1d1f","font-14"],[1,"border-radius-14","bgfff","padding-20"],["nz-row",""],["nz-col","",3,"nzSpan"],[1,"b","font-14","color-1d1d1f"],["nzListType","picture-card",3,"nzMultiple","nzBeforeUpload"],[4,"ngIf"],[3,"src",4,"ngIf"],[1,"color-ff6110"],["nzErrorTip","\u8bf7\u8f93\u5165\u5b66\u6821\u540d\u79f0!"],["nz-input","","type","text","name","name","placeholder","\u8bf7\u8f93\u5165\u5b66\u6821\u540d\u79f0","formControlName","name",3,"ngModel","ngModelChange"],["nzErrorTip","\u8bf7\u8f93\u5165\u5b66\u6821\u5730\u5740!"],["nz-input","","type","text","name","address","placeholder","\u8bf7\u8f93\u5165\u5b66\u6821\u5730\u5740","formControlName","address",3,"ngModel","ngModelChange"],[1,"padding-bottom-10","mt20"],["nz-col","",1,"padding-right-20",3,"nzSpan"],["nzCheckedChildren","\u5141\u8bb8","nzUnCheckedChildren","\u7981\u6b62",3,"ngModel","ngModelOptions","ngModelChange"],["nzCheckedChildren","\u5f00\u542f","nzUnCheckedChildren","\u5173\u95ed",3,"ngModel","ngModelOptions","ngModelChange"],["nzErrorTip","\u8bf7\u9009\u62e9\u6821\u5386\u53ef\u8bc4\u8bba\u7684\u7528\u6237\u7c7b\u578b!"],["formControlName","schoolCalendarReplyUserType","nzPlaceHolder","\u8bf7\u9009\u62e9\u6821\u5386\u53ef\u8bc4\u8bba\u7684\u7528\u6237\u7c7b\u578b",3,"ngModel","nzMode","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzErrorTip","\u8bf7\u9009\u62e9\u7efc\u5408\u7d20\u8d28\u53ef\u8bc4\u8bba\u7684\u7528\u6237\u7c7b\u578b!"],["formControlName","integratedReplyUserType","nzPlaceHolder","\u8bf7\u9009\u62e9\u7efc\u5408\u7d20\u8d28\u53ef\u8bc4\u8bba\u7684\u7528\u6237\u7c7b\u578b",3,"ngModel","nzMode","ngModelChange"],["nzErrorTip","\u8bf7\u9009\u62e9\u5b66\u4e60\u7a7a\u95f4\u53ef\u8bc4\u8bba\u7684\u7528\u6237\u7c7b\u578b!"],["formControlName","learningSpaceReplyUserType","nzPlaceHolder","\u8bf7\u9009\u62e9\u5b66\u4e60\u7a7a\u95f4\u53ef\u8bc4\u8bba\u7684\u7528\u6237\u7c7b\u578b",3,"ngModel","nzDisabled","nzMode","ngModelChange"],["nzErrorTip","\u8bf7\u9009\u62e9\u8bfe\u7a0b\u8ba1\u5212\u7684\u7528\u6237\u7c7b\u578b!"],["formControlName","coursePlanReplUserType","nzPlaceHolder","\u8bf7\u9009\u62e9\u8bfe\u7a0b\u8ba1\u5212\u53ef\u8bc4\u8bba\u7684\u7528\u6237\u7c7b\u578b",3,"ngModel","nzDisabled","nzMode","ngModelChange"],[1,"mt20","padding-top-20","text-center"],["nz-button","","nzType","primary",1,"btn","width","large",3,"nzLoading","click"],["nz-icon","","nzType","plus"],[2,"margin-top","8px"],[3,"src"],[3,"nzValue","nzLabel"]],template:function(e,n){1&e&&a.Hc(0,A,114,49,"form",0),2&e&&a.nc("ngIf",n.the_submit)},directives:[o.m,s.q,s.m,p.b,s.h,u.c,u.a,p.c,p.d,p.a,m.a,h.b,s.d,s.l,s.g,g.a,s.n,f.d,o.l,z.a,T.a,U.a,y.a,f.a],styles:[""]}),e})()}];let J=(()=>{class e{}return e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({factory:function(n){return new(n||e)},imports:[[i.g.forChild(L)],i.g]}),e})();var P=t("xuvC");let w=(()=>{class e{}return e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({factory:function(n){return new(n||e)},imports:[[o.c,J,P.a]]}),e})()}}]);
